<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>智慧园区</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Cache-Control" content="no-cache, must-revalidate" />
		<meta http-equiv="Expires" content="0" />
		<link th:href="@{/ruoyi/css/time.css}" rel="stylesheet"/>
		<link th:href="@{/ruoyi/css/alert_admin.css}" rel="stylesheet"/>
		<link th:href="@{/ruoyi/css/tongji/base.css}" rel="stylesheet"/>
		<link th:href="@{/ruoyi/css/tongji/childPage.css}" rel="stylesheet"/>
		<link th:href="@{/ruoyi/css/tongji/layui.css}" rel="stylesheet"/>
		<link th:href="@{/ruoyi/css/tongji/zarek.css}" rel="stylesheet"/>
	</head>
	<!--禁止选中 onselectstart="return false"-->
	<body onselectstart="return false">
		<div class="container">
			<!--头部-->
			<div class="head">
				<div class="log"><img src="img/logo.png"/></div>
				<!--系统-->
				<ul class="system">
					<li class="time"></li>
					<li class="system_user">
						<span><a class="user_name">admin</a></span>
						<ul>
							<!--<li><a>个人信息</a></li>
							<li><a href="#0">修改密码</a></li>-->
							<li><a th:href=@{logout}>注销</a></li>
						</ul>
					</li>
					<li class="system_admin"><a href="#0">系统管理</a></li>
				</ul>
				<div style="clear: both;"></div>
			</div>
			<!--头部-结束-->
			<!--左边切换卡-->
			<div class="left" id="leftList">
				<div class="qj">
					<a th:href = @{/panoramaPreview}>
						<img src="img/l-qj2.png" />
					</a>
				</div>
				<div class="sos active">
					<a th:href = @{/alert_admin}>
						<img src="img/l-sos.png" />
					</a>
				</div>
				<div class="tatistics">
					<a th:href = @{/tongji}>
						<img src="img/l-tatistics2.png" />
					</a>
				</div>
			</div>
			<!--左边切换卡-结束-->
			<div class="right"style="margin: 0px;">
				<div class="showDataTable">
				<!--<h1 class="showDataDomTitle">智慧园区统计分析</h1>-->
				<div class="showDataDom">
					
					<!--<ul class="childPageSlect">
							<li id="">本周</li>
							<li id="">本月</li>
							<li id="">本年</li>
							<li><input type="text" value="2019-2-20" placeholder="开始日期选择" id='timeStart'/></li>
							<li><input type="text" value="2019-2-21" placeholder="结束日期选择" id='timeEnd'/></li>
							<li><input type="button" name="" id="" value="查询" onclick=""/></li>
					</ul>	-->
						
					<div class="showDataDomPhSelect">
						<a href="#" target="main">
							<p>
								<b>100</b>
								<img src="img/all.png"/>
							</p>
							摄像头总数
						</a>
						<a href="#" target="main">
							<p>
								<b>23</b>
								<img src="img/all.png"/>
							</p>
							东边摄像头
						</a>
						<a href="#" target="main">
							<p>
								<b>33</b>
								<img src="img/all.png"/>
							</p>
							南边摄像头
						</a>
						<a href="#" target="main">
							<p>
								<b>65</b>
								<img src="img/all.png"/>
							</p>
							西边摄像头
						</a>
						<a href="#" target="main">
							<p>
								<b>44</b>
								<img src="img/all.png"/>
							</p>
							北边摄像头 
						</a>
						<a href="#" target="main">
							<p>
								<b>0</b>
								<img src="img/all.png"/>
							</p>
							摄像头正常
						</a>
						<a href="#" target="main">
							<p>
								<b>68</b>
								<img src="img/all.png"/>
							</p>
							摄像头离线
						</a>
						<a href="#" target="main">
							<p>
								<b>47</b>
								<img src="img/all.png"/>
							</p>
							摄像头报警
						</a>
						<a href="#" target="main">
							<p>
								<b>0</b>
								<img src="img/all.png"/>
							</p>
							报警已处理
						</a>
					</div>
					<div class="showDataDomEchart">
						<ul class="showDataDomFans">
							<li class="showDataDomli">
								<ol>
									<li>待定</li>
								</ol>
								<div id="showDataDomFans01"></div>
							</li>
							<li class="showDataDomli">
								<ol>
									<li>待定</li>
								</ol>
								<div id="showDataDomFans02"></div>
							</li>
						</ul>
						<ul class="showDataDomAbnormal">
							<li>
								<button>待定</button>
								<button>待定</button>
								<b id='showErro'>
									<i>16</i>
									<i>待定 </i>
								</b>
							</li>
							<li id="showDataRightEchartTop"></li>
							<li id="showDataRightEchartBtm"></li>
						</ul>
					</div>
				</div>
			</div>
			<input type="hidden" name="jupUrl" id="jupUrl" value="index.php?m=Home&c=Enfor&a=index" />
			<textarea name="" id="in_enfor" rows="" cols="" style="display: none;">1</textarea>
			<textarea name="" id="al_enfor" rows="" cols="" style="display: none;">2</textarea>
		</div>
		<script th:src="@{/js/jquery-1.7.1.min.js}"></script>
		<script th:src="@{/ruoyi/js/time.js}"></script>
		<script>
			/********************************************获取高度和宽度***************************************************/
			//js  兼容各浏览器，获取高度和宽度
			var userHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;   //当前浏览器height
			var userWidth = parseInt(window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth); //当前浏览器width
			//var userWidth = parseInt(window.screen.width);//显示器分辨率
			var mWidth = userWidth - 20;
			if (userWidth < 1024 || userWidth < "1024") {
				$(".container").css({"min-width" : "1004px","min-height": "564px"});
			} else{
				//设置最小宽度和最小高度
				$(".container").css({"min-width" : mWidth + "px","min-height": mWidth*9/16 +"px"});
			}
			console.log(userHeight +":" + userWidth)
			/*当分辨率小于1366时，设置 时间、管理系统的宽度*/
			if(userWidth <= 1366 || userWidth <= "1366"){
				$(".system").css({"width":"20%"});
			}
			/********************************************获取高度和宽度-结束***************************************************/
			/********************************************js获取本地时间***************************************************/
			//说明：先用一个定时器在进入页面的时候就获取本地时间，然后销毁定时器，在销毁之前调用另一个一秒执行一次的定时器
			var interval = setInterval(function(){
				var myDate = new Date();
				//时钟
				var hours = myDate.getHours();
				//分钟
				var minute = myDate.getMinutes();
				if(hours < 10){
					hours = "0"+hours;
				}
				if(minute < 10){
					minute = "0"+minute;
				}
				$(".time").text(hours+":"+minute);
				interval2;
				clearInterval(interval);
			},0);
			var interval2 = setInterval(function(){
				var myDate = new Date();
				//时钟
				var hours = myDate.getHours();
				//分钟
				var minute = myDate.getMinutes();
				if(hours < 10){
					hours = "0"+hours;
				}
				if(minute < 10){
					minute = "0"+minute;
				}
				$(".time").text(hours+":"+minute);
			},1000);
			/********************************************js获取本地时间-结束***************************************************/
			/********************************************左边导航hover改变图片***************************************************/
			//鼠标移入改变图片
			$("#leftList div").mouseenter(function(){
				var LIndex = $(this).index();
				if (LIndex == 0 || LIndex == "0") {
					$(this).children("a").children("img").attr("src","img/l-qj.png");
				} else if(LIndex == 1 || LIndex == "1"){
					$(this).children("a").children("img").attr("src","img/l-sos.png");
				}
				else if(LIndex == 2 || LIndex == "2"){
					$(this).children("a").children("img").attr("src","img/l-tatistics.png");
				}
				
			});
			//鼠标移出恢复图片
			$("#leftList div").mouseleave(function(){
				var LIndex = $(this).index();
				if (LIndex == 0 || LIndex == "0") {
					if($(this).is(".active")){
					}else{
						$(this).children("a").children("img").attr("src","img/l-qj2.png");
					}
				} else if(LIndex == 1 || LIndex == "1"){
					if($(this).is(".active")){
					}else{
						$(this).children("a").children("img").attr("src","img/l-sos2.png");
					}
				}
				else if(LIndex == 2 || LIndex == "2"){
					if($(this).is(".active")){
					}else{
						$(this).children("a").children("img").attr("src","img/l-tatistics2.png");
					}
				}
				
			});
			/********************************************左边导航hover改变图片-结束***************************************************/
		</script>
		<script type="text/javascript">//时间、日期
		//$('#mydatepicker1').dcalendarpicker(); 
			$('#mydatepicker1').dcalendarpicker({
				format:'yyyy-mm-dd'
			}); 
			$('#mydatepicker2').dcalendarpicker({
				format:'yyyy-mm-dd'
			}); 
		</script>
		<script th:src="@{/ruoyi/js/tongji/echarts.js}"></script>
		<script th:src="@{/ruoyi/js/layui/layui.js}"></script>
		<script th:src="@{/ruoyi/js/tongji/showDataTable.js}"></script>
		<script th:src="@{/ruoyi/js/tongji/timeSlot.js}"></script>
		<script th:src="@{/ruoyi/js/tongji/loadAnmt.js}"></script>
		<script type="text/javascript">
			//统计页面内方法
			showDataTable.clsNameRB=['球机','半球机','全景','红外'];
			var in_enfor = document.getElementById('in_enfor').value;
			in_enfor = JSON.parse(in_enfor);
			
			showDataTable.lftTstr=in_enfor; //左面Echarts01数组
			showDataTable.showDataFansL("showDataDomFans01","top");//左面Echarts01
			
			var al_enfor = document.getElementById('al_enfor').value;
			al_enfor = JSON.parse(al_enfor);
			showDataTable.lftBstr=al_enfor; //左面Echarts02数组
			showDataTable.showDataFansL("showDataDomFans02","bottom");//左面Echarts02
			
			showDataTable.titleR='视频汇总';
			showDataTable.rghTstr=[60, 10, 2, 30];//右面Echarts头部数组；待定
			showDataTable.rghBstr=[2, 44, 1, 66];//右面Echarts低头部数组；待定
			
			showDataTable.showStr=showDataTable.rghTstr;
			showDataTable.showDataRightEchart("showDataRightEchartTop","top");//右面Echarts
			showDataTable.showDataRightEchart("showDataRightEchartBtm","bottom");//右面Echarts
			
			var countB=showDataTable.rghTstr;
			$('#showErro i:eq(0)').text(countB[0]+countB[1]+countB[2]+countB[3]);
			$('.showDataDomAbnormal li:first-child button').on('click',function(){
				var index=$(this).index();
				if(index==0){
					countB=showDataTable.rghTstr;
					showDataTable.showStr=showDataTable.rghTstr;
					showDataTable.showDataRightEchart("showDataRightEchartBtm","bottom");//右面Echarts
					$('#showErro i:eq(0)').text(countB[0]+countB[1]+countB[2]+countB[3]);
					$('#showErro i:eq(1)').text('异常视频');
				}else if(index==1){
					countB=showDataTable.rghBstr;
					showDataTable.showStr=showDataTable.rghBstr;
					showDataTable.showDataRightEchart("showDataRightEchartBtm","bottom");//右面Echarts
					$('#showErro i:eq(0)').text(countB[0]+countB[1]+countB[2]+countB[3]);
					$('#showErro i:eq(1)').text('正常视频');
				}
				$(this).css({
					'border': '2px solid #ff9702',
					'background-color':'rgba(108,87,56,0.45)'
				}).siblings('button').css({
					'border': '2px solid #1bd2ff',
					'background-color':'rgba(22,93,132,0.7)'
				});
			});
		</script>
	</body>

</html>